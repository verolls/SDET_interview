## 什么是进程？什么是线程？

进程就是系统中正在运行的一个程序。进程是系统资源分配的单元，每个进程都拥有独立的地址空间。一个进程无法访问另一个进程的变量和数据结构，如果想让一个进程访问另一个进程的资源，需要使用进程间通信。

线程是进程的一个执行单元，一个进程可以拥有多个线程，多个线程共享进程的资源。线程也被称为轻量级进程。


## 进程和线程的区别是什么？

- 地址空间：进程之间是独立的地址空间，而线程共享本进程的地址空间。
- 资源：进程之间的资源是独立的，能很好的进行资源管理和保护，而多个线程共享本进程的资源如内存、I/O、CPU等，不利于资源的管理和保护。
- 健壮性：多进程要比多线程健壮，一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。
- 执行过程：每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口，执行开销大。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制，执行开销小。
- 切换时：进程切换时，代价大，线程切换时，代价小。

## 何时使用多进程？何时使用多线程？

对资源的管理和保护要求高，不限制开销和效率时，使用多进程。

要求效率高，频繁切换时，资源的保护管理要求不是很高时，使用多线程。

## 有了进程为什么还需要线程？

在一个进程中会存在多种活动任务，如果只有一个调度来执行这些任务，那么当某个任务被阻塞时，其他任务将得不到执行，因此需要有多个独立调度的单元来使这些任务可以并行的执行，这些单元就是线程。

线程比进程更轻量，它们比进程更快的创建，也更容易撤销。线程间切换的开销也比进程小，由于进程拥有大量的资源，当切换到另一个进程的时候，需要保存当前进程的所有资源，而线程间的切换只需要保存当前堆栈和少了寄存器的内容。

## 什么是进程上下文切换？什么是线程上下文切换？

上下文切换指的是当前任务的资源（寄存器和程序计数器等）、状态等内容保存起来，然后加载新任务的资源和状态，跳转到新的程序计数器指定的指令继续执行。

进程上下文切换不仅需要保存虚拟内存、全局变量、文件描述符等用户空间资源，还需要保存内核堆栈、寄存器、程序计数器等内核资源。

线程上下文切换只需要保存自己的线程栈和寄存器内容，比进程切换开销小很多。


## 线程间的通信方式有哪些

- 共享变量
- 共享内存
- 共享数据库
- 消息队列

## 进程间的通信方式有哪些？

- 管道：通常用在父子进程间通信。
- 命名管道：去除了父子进程间通信的机制，通常用来汇聚多个客户端进程与服务端进程的通信。
- 消息队列：独立于进程存在，进程间可以通过消息队列来传递数据，典型的模式是生产者-消费者模型。
- 信号：一个进程可以给另一个进程发送信号来触发某些操作，比如挂起一个进程。Linux 通过 kill 命令来发送信号。
- 信号量：信号量是一个计数器，用来保护临界资源。进程可以读取信号量的值，并对它进行加减操作，多个进程可以通过信号量实现进程同步。
- 共享内存：多个进程上不同的地址空间可以映射到同一块物理内存上，实现数据的共享，因为不涉及数据的拷贝，所以这是一种高效的通信方式。需要注意的是，多个进程并行时，需要通过同步机制保护共享内存的访问。
- Socket 通信：通过网络实现不同机器上不同进程间的通信。

## 同步和异步的区别是什么？

- 同步：执行一个操作之后，等待结果，然后才继续执行后续的操作
- 异步：执行一个操作之后，直接去执行其他操作，然后等待通知再回来执行刚才没执行完的操作

## 并发和并行的区别是什么？

- 并发：一段时间内可以同时运行多道程序，因为时间较短，所以看起来像多个程序在同时执行，实际上是多个程序在快速切换。
- 并行：同一时刻可以同时运行多个程序。

由于同一个 CPU 在同一时刻只能执行一个任务指令，因此针对单核 CPU，只能并发，无法并行。针对多核 CPU，并发和并行一般同时存在。

单核 CPU 并发：

![在这里插入图片描述](https://img-blog.csdnimg.cn/1efd72ee9c964b44a799e5eb3a41b18f.png)

多核 CPU 并发+并行：

![在这里插入图片描述](https://img-blog.csdnimg.cn/0e698f934fe44f708ee7fcd8760d71a8.png)

## 阻塞和非阻塞的区别是什么？

- 阻塞：进程给CPU传达一个任务之后，一直等待，直到CPU处理完成，才执行后面的操作
- 非阻塞：进程给CPU传达一个任务之后，继续处理后续的操作，隔一段时间再来询问之前的操作是否完成(也叫作轮询)


## 为什么进程间切换的代价比线程间切换的代价大？

## 什么是线程安全？

## 线程同步的方式有哪些？





## 可以说一下进程的地址空间吗？

## 进程切换为什么比线程切换慢？


## 僵尸进程和孤儿进程的区别？

僵尸进程：一个子进程退出时会处于 ZOMBIE 状态，此时它占用的进程描述符没有被释放，只有等它的父进程调用 wait() 或 waitpid() 获取到子进程的信息后，最后由父进程决定是否将子进程资源释放。如果子进程的资源由于某种原因一直得不到释放，那么就一直处于僵死状态，变成了僵尸进程。

孤儿进程：当父进程退出了，但是它的子进程还没有退出，这些子进程就变成了孤儿进程。孤儿进程只是暂时的，系统会在父进程退出时启动寻父机制，为子进程找到一个新的父亲：首先在当前进程组中寻找，如果找不到就会返回 init (PID=1) 进程作为父进程。

系统中如果驻留大量的僵死进程是危险的，因为会一直占用系统资源，解决的直接办法就是杀死父进程，让他们变成孤儿进程，最后会被新的进程领养，新的父进程会例行调用 wait() 来检查子进程状态，清除相关的僵死进程。




## 什么是分页机制？

## 什么是分段机制？

## 分页和分段的区别是什么？

## 什么是虚拟内存？

## 什么是内存抖动？

